<div>
	<style scoped>
		[aria-orientation=horizontal] > * {
			float: left;
		}
		
		tr.elgg-state-selected td {
			background: pink;
		}

		tr:hover td {
			background: lightgrey;
		}

		tr.elgg-state-focused td:first-child {
			background: red;
		}
	</style>
	<div class="pbs">
		<input type="search" data-ng-model="q" placeholder="Search..." />
	</div>
	
	<div class="mvm clearfix">
		<ul style="float:left" aria-orientation="horizontal">
			<li>
				<a href="/admin/users/add" class="elgg-button elgg-button-action">
					Add new user
				</a>
			</li>
			<li data-ng-show="getSelectedItems().length > 0">
				<button class="elgg-button elgg-button-action">Spam</button>
			</li>
		</ul>
		<ul style="float:right" aria-orientation="horizontal">
			<li>
				1 - <span data-ng-bind="getItems().length">?</span>
				out of <span data-ng-bind="getTotalItems()">??</span>
			</li>
		</ul>
	</div>
	<table class="elgg-table elgg-table-fixed">
		<style scoped>
			.elgg-col-location { max-width: 15%; width: 15%; }
			.elgg-col-timestamp { max-width: 12%; width: 12%; }
			.elgg-col-status { max-width: 8%; width: 8%; }
		</style>
		<thead>
			<th>
				<input type="checkbox"
				       data-ng-checked="allSelected()"
				       data-ng-click="setAllSelections(!allSelected())"
				       title="Toggle All" />
			</th>
			<th class="elgg-col-name">Name</th>
			<th class="elgg-col-timestamp">Registered</th>
			<th class="elgg-col-timestamp">Activity</th>
			<th class="elgg-col-status">Status</th>
		</thead>
		<tbody data-when-scrolled="hasNextItems() && !isLoadingNextItems() && loadNextItems()"
		       tabindex="0" role="listbox" aria-activedescendant="option-{{getCurrentUser().guid}}"
		       data-ng-keydown="handleKeyDown($event)">
			<tr data-ng-repeat="user in getItems() | filter:q" role="option"
			    data-ng-class="getOptionClasses(user)" id="option-{{user.guid}}"
			    data-ng-click="setSelected(user, !isSelected(user)); listbox.currentUser = user"
			    aria-labelledby="option-{{user.guid}}-label">
				<td>
					<input type="checkbox" tabindex="-1" data-ng-model="listbox.selections[user.guid]" />
				</td>
				<td class="elgg-col-name">
					<div class="elgg-image-block">
						<a href="{{user.url}}" tabindex="-1" class="elgg-image elgg-avatar">
							<img data-ng-src="{{user.image.url}}" width=25 height=25 alt="" />
						</a>
						<div class="elgg-body">
							<h3 id="option-{{user.guid}}-label">
								<a href="{{user.url}}" tabindex="-1">{{user.displayName}}</a>
								<small>({{user.username}})</small>
							</h3>
							<div class="elgg-subtext">
								{{user.email}}
							</div>
						</div>
					</div>
				</td>
				<td class="elgg-col-timestamp">
					<time datetime="{{user.published}}" title="{{user.published | calendar}}">
						{{user.published | fromNow}}
					</time>
				</td>
				<td class="elgg-col-timestamp">
					<time datetime="{{user.last_action}}" title="{{user.last_action | calendar}}" data-ng-show="user.last_action">
						{{user.last_action | fromNow}}
					</time>
					<span data-ng-show="!user.last_action">Never</span>
				</td>
				<td class="elgg-col-status">
					<span data-ng-show="user.banned" title="{{user.ban_reason}}">Banned</span>
				</td>
			</tr>
		</tbody>
	</table>
	<div class="center">
		<button class="link"
		        data-ng-click="loadNextItems()"
		        data-ng-show="hasNextItems() && !isLoadingNextItems()">
			See more...
		</button>
		<div class="elgg-ajax-loader centered"
		     data-ng-show="isLoadingNextItems()">
		</div>
    </div>
</div>
